---
// URL Encoder/Decoder Component
---

<div class="bg-gray-800/50 backdrop-blur-sm p-6 rounded-2xl shadow-lg w-full max-w-4xl mx-auto border border-gray-700/80">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
            <label for="decoded-input" class="block text-sm font-bold text-gray-300 mb-2">Decodificado</label>
            <textarea id="decoded-input" rows="10" class="w-full p-3 bg-gray-900/70 text-white border-2 border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Escribe algo para codificar..."></textarea>
        </div>
        <div>
            <label for="encoded-input" class="block text-sm font-bold text-gray-300 mb-2">Codificado (URL)</label>
            <textarea id="encoded-input" rows="10" class="w-full p-3 bg-gray-900/70 text-white border-2 border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors" placeholder="Pega algo para decodificar..."></textarea>
        </div>
    </div>
</div>

<script>
    const decodedInput = document.getElementById('decoded-input') as HTMLTextAreaElement;
    const encodedInput = document.getElementById('encoded-input') as HTMLTextAreaElement;

    decodedInput.addEventListener('input', () => {
        try {
            encodedInput.value = encodeURIComponent(decodedInput.value);
        } catch (e) {
            // This part rarely fails
            encodedInput.value = 'Error al codificar.';
        }
    });

    encodedInput.addEventListener('input', () => {
        try {
            decodedInput.value = decodeURIComponent(encodedInput.value);
            // Remove error styling if successful
            encodedInput.classList.remove('border-red-500', 'ring-red-500');
            encodedInput.classList.add('border-gray-700', 'focus:ring-blue-500', 'focus:border-blue-500');
        } catch (e) {
            // This can fail if the user types invalid sequences like %
            decodedInput.value = 'Error: URI malformada.';
            // Add error styling
            encodedInput.classList.add('border-red-500', 'ring-red-500');
            encodedInput.classList.remove('border-gray-700', 'focus:ring-blue-500', 'focus:border-blue-500');
        }
    });
</script>
